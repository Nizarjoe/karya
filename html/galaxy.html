<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Galaxy Event System: AI Command Console</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Three.js CDN for 3D Visualization -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <style>
    /* Custom CSS for the full-screen canvas and dark background */
    body {
      overflow: hidden;
      margin: 0;
      background-color: #0d0d1e;
      /* Deep space color */
      font-family: 'Inter', sans-serif;
      cursor: grab;
    }

    #galaxy-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 0;
    }

    #hud-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 10;
      pointer-events: none;
      /* Allows mouse events to pass through to the canvas */
    }

    /* Custom neon button style */
    .neon-button {
      pointer-events: auto;
      background: rgba(79, 70, 229, 0.4);
      border: 1px solid #a78bfa;
      box-shadow: 0 0 10px #6366f1;
      transition: all 0.3s;
    }

    .neon-button:hover {
      background: rgba(79, 70, 229, 0.6);
      box-shadow: 0 0 20px #a78bfa, 0 0 5px #facc15;
      transform: scale(1.05);
    }
  </style>
</head>

<body>

  <!-- 3D Visualization Canvas Container -->
  <div id="galaxy-container"></div>

  <!-- Holographic UI / HUD Overlay -->
  <div id="hud-overlay">
    <div class="p-4 md:p-8 grid grid-cols-12 gap-4 h-full">

      <!-- Top Left: System Status Card -->
      <div
        class="col-span-12 lg:col-span-3 p-4 bg-gray-900/70 backdrop-blur-sm rounded-xl border border-indigo-500/50 shadow-lg mt-4 lg:mt-0 pointer-events-auto">
        <h1 class="text-xl font-bold text-indigo-300 border-b border-indigo-500/50 pb-2 mb-3">
          üåå Galaxy Command Console
        </h1>
        <p class="text-sm text-gray-400 mb-4">AI Core Status: <span class="text-yellow-400 font-mono">ONLINE
            [GPT-3.5_V.1]</span></p>

        <!-- KPI Bars Simulation -->
        <div class="space-y-3">
          <div class="text-xs font-semibold text-cyan-400">Production Readiness: 85%</div>
          <div class="h-2 bg-gray-700 rounded-full">
            <div class="h-2 bg-cyan-500 rounded-full transition-all duration-1000" style="width: 85%;"></div>
          </div>

          <div class="text-xs font-semibold text-purple-400">Financial Flow: 92% Budget Sec.</div>
          <div class="h-2 bg-gray-700 rounded-full">
            <div class="h-2 bg-purple-500 rounded-full transition-all duration-1000" style="width: 92%;"></div>
          </div>

          <div class="text-xs font-semibold text-red-400">Risk Escalation Index: 18%</div>
          <div class="h-2 bg-gray-700 rounded-full">
            <div class="h-2 bg-red-500 rounded-full transition-all duration-1000" style="width: 18%;"></div>
          </div>
        </div>

        <button class="neon-button w-full mt-5 py-2 text-sm font-semibold text-white rounded-lg"
          onclick="alert('Simulasi: Memicu analisis risiko dari AI Core.')">
          ACTIVATE AI DIAGNOSTICS
        </button>
      </div>

      <!-- Bottom Right: Legend Card -->
      <div
        class="col-span-12 lg:col-start-10 lg:col-span-3 self-end p-4 bg-gray-900/70 backdrop-blur-sm rounded-xl border border-purple-500/50 shadow-lg mb-4 pointer-events-auto">
        <h3 class="text-lg font-bold text-purple-300 mb-2">ü™ê System Legend</h3>
        <ul class="text-sm space-y-1 text-gray-300">
          <li class="flex items-center"><span class="w-2 h-2 bg-yellow-400 rounded-full mr-2"></span> AI CORE: Central
            Data Hub</li>
          <li class="flex items-center"><span class="w-2 h-2 bg-blue-400 rounded-full mr-2"></span> Creative Planet:
            Concept & Design</li>
          <li class="flex items-center"><span class="w-2 h-2 bg-green-400 rounded-full mr-2"></span> Production Planet:
            Logistics & Tech</li>
          <li class="flex items-center"><span class="w-2 h-2 bg-red-400 rounded-full mr-2"></span> Finance Planet:
            Budget & ROI</li>
          <li class="flex items-center"><span class="w-2 h-2 bg-purple-400 rounded-full mr-2"></span> Timeline Orbits:
            Event Phases</li>
        </ul>
      </div>
    </div>
  </div>

  <script type="module">
    // --- THREE.JS INITIALIZATION ---
    let scene, camera, renderer;
    let aiCore, orbitRings = [], planets = [], dataStreams = [];
    let mouseX = 0, mouseY = 0;
    let windowHalfX = window.innerWidth / 2;
    let windowHalfY = window.innerHeight / 2;
    const container = document.getElementById('galaxy-container');

    // Configuration based on Prompt
    const PLANET_DATA = [
      { name: "Creative", color: 0x4B0082, distance: 120, speed: 0.005 }, // Darker Blue/Indigo
      { name: "Finance", color: 0xFFD700, distance: 200, speed: 0.003 }, // Gold
      { name: "Production", color: 0x00FF7F, distance: 280, speed: 0.004 }, // Spring Green/Silver-Green
      { name: "Media", color: 0x9400D3, distance: 360, speed: 0.002 }, // Dark Violet/Purple
      { name: "Evaluation", color: 0x00FFFF, distance: 440, speed: 0.006 }, // Cyan
    ];

    function init() {
      // Scene Setup
      scene = new THREE.Scene();
      scene.fog = new THREE.FogExp2(0x0d0d1e, 0.001); // Subtle space fog

      // Camera Setup
      camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 5000);
      camera.position.set(0, 50, 800);

      // Renderer Setup
      renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(window.devicePixelRatio);
      renderer.setClearColor(0x0d0d1e, 1);
      container.appendChild(renderer.domElement);

      // --- GALAXY ELEMENTS CREATION ---

      // 1. AI Core (The Central Sun)
      const coreGeometry = new THREE.SphereGeometry(60, 32, 32);
      // Use an emissive material for that glowing core effect
      const coreMaterial = new THREE.MeshStandardMaterial({
        color: 0xffa500,
        emissive: 0xffd700, // Golden glow
        emissiveIntensity: 1.5,
        metalness: 0.8,
        roughness: 0.2
      });
      aiCore = new THREE.Mesh(coreGeometry, coreMaterial);
      scene.add(aiCore);

      // Core Light
      const coreLight = new THREE.PointLight(0xffd700, 10, 1000);
      aiCore.add(coreLight);

      // Background Stars (Data Nebula)
      const starsGeometry = new THREE.BufferGeometry();
      const starsVertices = [];
      for (let i = 0; i < 10000; i++) {
        const x = THREE.MathUtils.randFloatSpread(5000);
        const y = THREE.MathUtils.randFloatSpread(5000);
        const z = THREE.MathUtils.randFloatSpread(5000);
        starsVertices.push(x, y, z);
      }
      starsGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starsVertices, 3));
      const starsMaterial = new THREE.PointsMaterial({ color: 0xaaaaaa, size: 2, sizeAttenuation: true });
      const stars = new THREE.Points(starsGeometry, starsMaterial);
      scene.add(stars);

      // 2. Timeline Orbits (Rings)
      const timelineDistances = [120, 200, 280, 360, 440]; // Matches planet distances
      const ringMaterial = new THREE.MeshBasicMaterial({ color: 0x6366f1, side: THREE.DoubleSide, transparent: true, opacity: 0.2, wireframe: true });

      timelineDistances.forEach(distance => {
        const ringGeometry = new THREE.TorusGeometry(distance, 2, 2, 100);
        const ring = new THREE.Mesh(ringGeometry, ringMaterial);
        ring.rotation.x = Math.PI / 2; // Lay flat
        orbitRings.push(ring);
        scene.add(ring);
      });

      // 3. Planets (Divisions)
      const planetGeometry = new THREE.SphereGeometry(15, 16, 16);
      PLANET_DATA.forEach(data => {
        const planetMaterial = new THREE.MeshStandardMaterial({
          color: data.color,
          emissive: data.color,
          emissiveIntensity: 0.5,
          metalness: 0.9,
          roughness: 0.1
        });

        const planet = new THREE.Mesh(planetGeometry, planetMaterial);
        planet.userData.distance = data.distance;
        planet.userData.speed = data.speed;
        planet.userData.angle = Math.random() * Math.PI * 2;
        planets.push(planet);
        scene.add(planet);

        // Add a small light source to the planet for local glow
        const planetLight = new THREE.PointLight(data.color, 1, 100);
        planet.add(planetLight);

        // 4. Data Streams (Simple lines connecting Core to Planets)
        const streamMaterial = new THREE.LineBasicMaterial({ color: data.color, linewidth: 2, transparent: true, opacity: 0.7 });
        const points = [aiCore.position.clone(), planet.position.clone()];
        const streamGeometry = new THREE.BufferGeometry().setFromPoints(points);
        const streamLine = new THREE.Line(streamGeometry, streamMaterial);
        streamLine.userData.targetPlanet = planet;
        dataStreams.push(streamLine);
        scene.add(streamLine);
      });


      // Global Ambient Lighting
      const ambientLight = new THREE.AmbientLight(0x404040, 0.5); // soft white light
      scene.add(ambientLight);

      // --- EVENT LISTENERS ---
      window.addEventListener('resize', onWindowResize, false);
      document.addEventListener('mousemove', onMouseMove, false);

      // Start the animation loop on load
      window.onload = function () {
        animate();
      }
    }

    function onWindowResize() {
      windowHalfX = window.innerWidth / 2;
      windowHalfY = window.innerHeight / 2;
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    }

    let isMouseDown = false;
    let prevMouseX = 0;
    let prevMouseY = 0;

    // Function to update mouse movement for camera control
    function onMouseMove(event) {
      mouseX = (event.clientX - windowHalfX) * 2;
      mouseY = (event.clientY - windowHalfY) * 2;

      if (isMouseDown) {
        const deltaX = event.clientX - prevMouseX;
        const deltaY = event.clientY - prevMouseY;

        // Rotate the entire scene based on drag
        scene.rotation.y += deltaX * 0.005;
        scene.rotation.x += deltaY * 0.005;

        // Clamp X rotation to prevent flipping
        scene.rotation.x = Math.max(-Math.PI / 4, Math.min(Math.PI / 4, scene.rotation.x));

        prevMouseX = event.clientX;
        prevMouseY = event.clientY;
      }
    }

    // Add mousedown/mouseup listeners to enable dragging
    document.addEventListener('mousedown', (event) => {
      isMouseDown = true;
      prevMouseX = event.clientX;
      prevMouseY = event.clientY;
      document.body.style.cursor = 'grabbing';
    }, false);

    document.addEventListener('mouseup', () => {
      isMouseDown = false;
      document.body.style.cursor = 'grab';
    }, false);


    // --- ANIMATION LOOP ---
    function animate() {
      requestAnimationFrame(animate);

      const time = Date.now() * 0.0001;

      // 1. AI Core Pulsing
      aiCore.rotation.y += 0.001;
      const pulse = Math.sin(time * 5) * 0.05 + 1;
      aiCore.scale.set(pulse, pulse, pulse);

      // 2. Planet Orbital Movement
      planets.forEach((planet, index) => {
        planet.userData.angle += planet.userData.speed;

        // Calculate new position
        const x = planet.userData.distance * Math.cos(planet.userData.angle);
        const z = planet.userData.distance * Math.sin(planet.userData.angle);
        planet.position.set(x, 0, z);

        // Rotate the planet itself
        planet.rotation.y += 0.005 * (index % 2 === 0 ? 1 : -1);

        // 3. Update Data Stream Lines
        const streamLine = dataStreams[index];
        const positions = streamLine.geometry.attributes.position.array;

        // Update the end point of the line to the planet's new position (in world coordinates)
        positions[3] = planet.position.x;
        positions[4] = planet.position.y;
        positions[5] = planet.position.z;

        streamLine.geometry.attributes.position.needsUpdate = true;

        // Simple color pulse for streams
        const hue = (Math.sin(time * 10 + index) * 0.5 + 0.5) * 0.5 + 0.5;
        streamLine.material.opacity = hue * 0.5 + 0.3;
      });

      // 4. Subtle Camera Movement (Simulating float)
      camera.position.x += ((-mouseX * 0.001) - camera.position.x) * 0.05;
      camera.position.y += ((mouseY * 0.001) - camera.position.y) * 0.05;

      // Camera looking at the center (0, 0, 0)
      camera.lookAt(aiCore.position);

      renderer.render(scene, camera);
    }

    // Initialize the 3D scene
    init();
  </script>
</body>

</html>